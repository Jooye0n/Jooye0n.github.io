---
title: JAVA의 실수형 표현
author: Jooye0n
date: 2024-08-18 15:02:00 +09:00
categories: [Programming, ETC]
tags: [JAVA]
toc: true
toc_sticky: true
toc_label: 목차
math: true
mermaid: true
---

## 0. 컴퓨터의 소수점 방식 표현
---
컴퓨터에서 실수를 표현하는 방식은 대표적으로 고정 소수점 방식(Fixed-Point Number Representation)과 부동 소수점 방식(Floating-Point Number Representation)가 있다.   

## 1. 고정 소수점 방식 (Fixed-Point Number Representation)
---
고정 소수점 방식은 정수부와 소수부의 자리수를 고정하는 것이다.  
정수부는 15비트이고 소수부는 16비트로 고정되어있다. 이렇게 되면 정수부는 -2¹⁵ ~ 2¹⁵-1 밖에 표현을 못한다. 또한 1111111111.45678의 경우에, 소수부 6자리 이외의 10비트가 낭비하는 메모리 공간이 많게 될수 있다. 이러한 공간 낭비를 줄이고 효율적으로 실수 메모리를 표현하기 위해 컴퓨터는 부동 소수점 방식을 사용한다.  

## 2. 부동 소수점 방식(Floating-Point Number Representation)
---
부동 소수점 방식은 소수점(point)이 떠다닌다(floating)는 의미로, 실수형에서 표현할 수 있는 값을 범위를 최대로 넓혀서 오차를 줄이기 위해 고안한 방식이다.  
부동 소수점 방식은 부호 비트(sign bit), 지수 비트(exponent bit), 가수 비트(mantissa bit)로 구성된다. 가수란 부동 소수점 기수법에서 어떤 수의 유효 자릿수를 나타내는 부분이다. 예를 들면, 10진수 0.0001234는 0.1234×10⁻³으로 표현되는데, 이때에 0.1234를 가수라고 하고 -3을 지수라고 한다. 가수는 실수 부분을 나타내고 지수는 소수점의 위치를 지정한다. 이렇게 하면, 정수부 자리수만 기억하고, 정수부를 포함하여 실수형으로 만들어서, 실수 표현의 범위가 확장되어 오차를 줄일 수 있다. 현재 사용되고 있는 부동 소수점 방식은 대부분 IEEE 754 표준을 따르고 있다.  
정수와 다르게 실수는 `2의 보수법`을 사용하지 않는다. 따라서 양의 실수를 음의 실수로 바꾸려면, 부호 비트를 0에서 1로 변경하면 된다. float의 경우 지수는 8bit이며, 지수는 부호가 있는 정수 이므로 -127 ~ 128의 값이 저장된다. 컴퓨터는 2진수로 연산을 한다. 부동 소수점 방식은 가수부에는 2진 소수점수이고, 지수부에는 2진 소수점의 위치를 가리키는 제곱 수이다. 1110000.1101₂에서 소수점을 이동하여 1.m X 2ⁿ 으로 변환하는 것을 정규화라고 한다.

> `2의 보수법` 개념 정리  
10진수에도 양수 1이 있고 음수 1이 있듯이 2진수에도 음수가 존재한다. 먼저, 어떤 수의 n의 보수란 어떤 수에 더했을 때 n이 되는 수이다.  
ex)  
7의 10의 보수는 3이다. 7+3 = 10  
3의 10의 보수는 7이다. 3+7 = 10  
이때, 3과 7은 10의 보수의 관계에 있다고 정의한다.  
2의 보수 관계도 더해서 2가 되는 두 수의 관계를 말하고, 10진수 2는 2진수로 '10'이다. 2진수로 '10'은 자리올림이 발생하고 0이 되는 수를 뜻한다. 때문에 2의 보수 관계에 있는 두 2진수를 더하면 (자리올림이 발생하며) 0이된다. 2의 보수는 1의 보수에 1을 더해 구한다고 배워왔는데, 0을 1로 바꾸고 1을 0으로 바꾸면 나오는 1의 보수와의 합은 반드시 2진수로 표현했을때 모든 자리가 1이 되며, 여기서 1을 더할 경우 반드시 자리올림이 발생하기 때문에 1의 보수에 1을 더한 값이 2의 보수가 된다는 것이 당연해진다.  
2의 보수법에서 양수를 음수를 변환하는 방법은 사실상 2의 보수를 구하는 방법과 동일하다.  
4비트 기준으로 설명하면,  
 0101 (10진수 5)  
+1011 (10진수 -5)  
-------------------------  
1<span style="color:blue">0000</span> -> 크기가 4비트 이기 때문에 자리올림은 버려짐. 2의 보수 관계에 있는 두 2진수로 5와 -5처럼 절대값이 같고 부호가 다른 두 10진수를 표현하는 것을 2의 보수법이라한다. 0101의 2의 보수는 0101이다.  
2의 보수법을 사용했을때의 장점은 크게 두 가지가 있다.  
1) 단순화된 산술 연산  
2의 보수를 사용하면 덧셈과 뺄셈을 동일한 하드웨어로 처리할 수 있다. 이는 산술 연산을 단순화하고 하드웨어 설게를 간소화한다.  
(단순 부호비트만을 사용할 경우 +5와 -5를 더했을 때 0이 나와야 하는데 부호 비트만 변경했을때 0이 나오지 않는 문제가 생긴다. 그래서 2의 보수법이 사용되기 시작했다.)  
2) 대칭적인 수의 범위  
2의 보수는 0을 0000으로만 표현하므로 -0의 공간이 남게 된다. 남은 공간에 -8을 할당하여 사용하게 된다.즉, 2의 보수는 1의 보수보다 한가지 수를 더 표현할 수 있게 되며, 표현가능한 양수의 수와 음수의 갯수가 동일해진다. 
{: .prompt-info }  

소수점은 무한소수가 있기 때문에, 양의 무한대(POSTIVE_INFINITY), 음의 무한대(NEGATIVE_INFINITY)와 같은 무한대 값이 있다. 또한 `NaN(Not a Numer)`와 같은 수가 아닌 특수한 값이 있다. 이렇게 최대 표현 범위를 벗어나면 `Overflow`라 한다. <strong>NaN과 Infinity의 값은 -127과 128에 해당하는 예약 값이다.</strong> 양의 무한대와 음의 무한대는 모두 같은 Infinity로 출력된다. 따라서 실제로 사용가능한 값은 -127 ~ 128 중에서 -127과 128 값을 뺀 -126 ~ 127이다.

지수의 최대값이 127이므로, float 타입으로 표현할 수 있는 최대값은 2¹²⁷이며, 10진수로 약 10³⁸이다. float의 가수는2 ⁻²³까지 갈수 있으므로, 2⁻²³ x 2⁻¹²⁶ = 2⁻¹⁴⁹까지 표현할수 있다. 10진수로 표현하면, 약 10⁻⁴⁵이다. 그리고 정수형에는 없는 언더플로우(Underflow)가 있는데, 최 표현 범위인 0에 어주 가까운데 실수로 표현할수 없는 수이다. 따라서 이 때 실수형 변수의 값은 0이 된다. 다음 그림은 float 타입으로 표현할 수 있는 값의 범위이며, Over/Underflow 범위도 표시되어 있다.  




